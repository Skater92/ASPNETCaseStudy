"use strict";(self["webpackChunkcasestudyquasar"]=self["webpackChunkcasestudyquasar"]||[]).push([[508],{5572:(t,e,a)=>{a.d(e,{C:()=>o,_:()=>r});const s="https://localhost:7029/api/",r=async t=>{let e,a=l();try{let r=await fetch(`${s}${t}`,{method:"GET",headers:a});e=await r.json()}catch(r){console.log(r),e={error:`Error has occured: ${r.message}`}}return e},o=async(t,e)=>{let a,r=l();try{let o=await fetch(`${s}${t}`,{method:"POST",headers:r,body:JSON.stringify(e)});a=await o.json()}catch(o){a=o}return a},l=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("user"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},1508:(t,e,a)=>{a.r(e),a.d(e,{default:()=>A});var s=a(9835),r=a(6970);const o={class:"text-center"},l={row:""},c={class:"text-h4 q-mt-xl text-primary"},n=(0,s.Uk)(" Cart Contents "),i=(0,s._)("img",{src:"img/BoneHeadAudio.png",alt:"BoneHeadLogo",width:"200",style:{"margin-top":"10%","margin-bottom":"10%"}},null,-1),d={class:"text-h6 q-mt-lg text-positive"},m={key:0,style:{width:"90vw","margin-left":"5vw","margin-top":"1vh"}},u=(0,s.Uk)("QTY"),y=(0,s.Uk)("ITEM"),g=(0,s.Uk)("MSRP"),p=(0,s.Uk)("TOTAL"),w=(0,s.Uk)(" Subtotal: "),f={class:"row justify-end"},h=(0,s.Uk)(" HST (13%): "),_={class:"row justify-end"},q=(0,s.Uk)(" Total: "),v={class:"row justify-end"},S={row:""},x={class:"text-center q-mb-xl"};function C(t,e,a,C,k,T){const I=(0,s.up)("q-icon"),W=(0,s.up)("q-item-section"),b=(0,s.up)("q-item"),U=(0,s.up)("q-list"),$=(0,s.up)("q-card"),M=(0,s.up)("q-scroll-area"),j=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[(0,s._)("div",l,[(0,s._)("div",c,[n,(0,s.Wm)(I,{name:"shopping_cart",size:"100",class:"q-mr-md"})])]),i,(0,s._)("div",d,(0,r.zw)(C.state.status),1)]),C.state.tray.length>0?((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",null,[(0,s.Wm)(b,{style:{bottom:"-2vh"}},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"col-2 q-ml-sm text-h6 text-primary"},{default:(0,s.w5)((()=>[u])),_:1}),(0,s.Wm)(W,{class:"q-ml-sm text-h6 text-primary"},{default:(0,s.w5)((()=>[y])),_:1}),(0,s.Wm)(W,{class:"q-ml-sm text-h6 text-primary"},{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(W,{class:"q-ml-sm text-h6 text-primary"},{default:(0,s.w5)((()=>[p])),_:1})])),_:1}),(0,s.Wm)(M,{style:{height:"40vh"}},{default:(0,s.w5)((()=>[(0,s.Wm)($,{class:"q-ma-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.state.tray,(t=>((0,s.wg)(),(0,s.j4)(b,{key:t.id,clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"col-2"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(t.qty),1)])),_:2},1024),(0,s.Wm)(W,{class:"text-left"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(t.product.productName),1)])),_:2},1024),(0,s.Wm)(W,{class:"text-left"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(C.formatCurrency(t.product.msrp)),1)])),_:2},1024),(0,s.Wm)(W,{class:"text-left"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(C.formatCurrency(t.product.msrp*t.qty)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,s.Wm)(b,{row:"q-mx-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"text-bold"},{default:(0,s.w5)((()=>[w])),_:1}),(0,s._)("div",f,[(0,s.Wm)(W,{class:"q-mr-lg"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(C.formatCurrency(C.state.tray.reduce(((t,e)=>t+e.product.msrp*e.qty),0))),1)])),_:1})])])),_:1}),(0,s.Wm)(b,{row:"q-mx-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"text-bold"},{default:(0,s.w5)((()=>[h])),_:1}),(0,s._)("div",_,[(0,s.Wm)(W,{class:"q-mr-lg"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(C.formatCurrency(C.state.tray.reduce(((t,e)=>t+e.product.msrp*e.qty*.13),0))),1)])),_:1})])])),_:1}),(0,s.Wm)(b,{class:"justify-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"text-primary text-bold"},{default:(0,s.w5)((()=>[q])),_:1}),(0,s._)("div",v,[(0,s.Wm)(W,{class:"text-primary q-mr-lg"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(C.formatCurrency(C.state.tray.reduce(((t,e)=>t+e.product.msrp*e.qty*1.13),0))),1)])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",S,[(0,s._)("div",x,[(0,s.Wm)(j,{class:"q-ma-sm",color:"primary",icon:"shopping_cart",label:"Checkout",disable:C.state.tray.length<1,onClick:e[0]||(e[0]=t=>C.saveTray())},null,8,["disable"]),(0,s.Wm)(j,{glossy:"",color:"negative",icon:"remove_shopping_cart",class:"q-ma-sm",onClick:e[1]||(e[1]=t=>C.clearTray()),label:"Empty Cart"})])])])):(0,s.kq)("",!0)],64)}var k=a(499),T=a(5572),I=a(8910);const W={setup(){const t=(0,I.tv)();(0,s.bv)((()=>{a()}));let e=(0,k.qj)({status:"",fbrTot:0,calTot:0,saltTot:0,fatTot:0,cholTot:0,proTot:0,carbTot:0,tray:[]});(0,s.bv)((()=>{sessionStorage.getItem("tray")?(e.tray=JSON.parse(sessionStorage.getItem("tray")),e.tray.forEach((t=>{}))):e.tray=[]}));const a=async()=>{try{e.status="loading categories...";const t=await(0,T._)("Category");void 0===t.error?(e.categories=t,e.status=`loaded ${e.categories.length} categories`):e.status=t.error}catch(t){console.log(t),e.status=`Error has occured: ${t.message}`}},r=async()=>{let t=JSON.parse(sessionStorage.getItem("user")),a=JSON.parse(sessionStorage.getItem("tray"));try{e.status="Sending Cart to Server...";let s={email:t.email,selections:a},r=await(0,T.C)("order",s);r.indexOf("not")>0||i(),e.status=r}catch(s){console.log(s),e.status=`Error add cart: ${s}`}},o=async()=>{try{e.selectedCategory=e.categories.find((t=>t.id===e.selectedCategoryId)),e.status=`finding menuitems for category ${e.selectedCategory}...`,e.menuitems=await(0,T._)(`Menuitem/${e.selectedCategory.id}`),e.status=`loaded ${e.menuitems.length} menu items for ${e.selectedCategory.name}`}catch(t){console.log(t),e.status=`Error has occured: ${t.message}`}},l=async t=>{try{e.selectedMenuItem=e.menuitems.find((e=>e.id===t)),e.itemSelected=!0,e.dialogStatus="",sessionStorage.getItem("tray")&&(e.tray=JSON.parse(sessionStorage.getItem("tray")))}catch(a){console.log(a),e.status=`Error has occured: ${a.message}`}},c=()=>{let t=-1;e.tray.length>0&&(t=e.tray.findIndex((t=>t.id===e.selectedMenuItem.id))),e.qty>0?(-1===t?e.tray.push({id:e.selectedMenuItem.id,qty:e.qty,item:e.selectedMenuItem}):e.tray[t]={id:e.selectedMenuItem.id,qty:e.qty,item:e.selectedMenuItem},e.dialogStatus=`${e.qty} item(s) added`):(-1!==t&&e.tray.splice(t,1),e.dialogStatus="item(s) removed"),sessionStorage.setItem("tray",JSON.stringify(e.tray)),e.qty=0},n=()=>{t.push("tray")},i=()=>{sessionStorage.removeItem("tray"),e.tray=[],e.status="CALAMITY! CART IS EMPTY"},d=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"});return{state:e,loadMenuitems:o,selectMenuItem:l,addToTray:c,viewTray:n,clearTray:i,formatCurrency:d,saveTray:r}}};var b=a(1639),U=a(2857),$=a(490),M=a(1233),j=a(1019),z=a(4458),E=a(3246),O=a(4455),N=a(9984),Q=a.n(N);const Z=(0,b.Z)(W,[["render",C]]),A=Z;Q()(W,"components",{QIcon:U.Z,QItem:$.Z,QItemSection:M.Z,QScrollArea:j.Z,QCard:z.Z,QList:E.Z,QBtn:O.Z})}}]);